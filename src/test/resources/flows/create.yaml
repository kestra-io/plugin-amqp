id: create
namespace: io.kestra.amqp

tasks:
  - id: createExchange
    type: io.kestra.plugin.amqp.CreateExchange
    uri: "amqp://guest:guest@localhost:5672"
    name: "tests.exchange"
  - id: createQueue
    type: io.kestra.plugin.amqp.CreateQueue
    uri: "amqp://guest:guest@localhost:5672"
    name: "tests.auto-expire"
    args:
      x-expires: 15000
  - id: bindQueue
    type: io.kestra.plugin.amqp.QueueBind
    uri: "amqp://guest:guest@localhost:5672"
    queue: "tests.auto-expire"
    exchange : "tests.exchange"
